import{_ as r,c as t,a,b as n,o as s,r as l}from"./app.7b83084b.js";const B=JSON.parse('{"title":"prettier 格式化","description":"","frontmatter":{},"headers":[{"level":2,"title":"用法","slug":"用法","link":"#用法","children":[]},{"level":2,"title":"与官方 prettier 插件的区别：","slug":"与官方-prettier-插件的区别","link":"#与官方-prettier-插件的区别","children":[]},{"level":2,"title":"配置默认不支持的文件类型的格式化","slug":"配置默认不支持的文件类型的格式化","link":"#配置默认不支持的文件类型的格式化","children":[{"level":3,"title":"安装插件","slug":"安装插件","link":"#安装插件","children":[]},{"level":3,"title":"plugins支持绝对路径","slug":"plugins支持绝对路径","link":"#plugins支持绝对路径","children":[]},{"level":3,"title":"相对路径","slug":"相对路径","link":"#相对路径","children":[]},{"level":3,"title":"插件列表","slug":"插件列表","link":"#插件列表","children":[]}]},{"level":2,"title":"自行设置快捷键","slug":"自行设置快捷键","link":"#自行设置快捷键","children":[]},{"level":2,"title":"旧版本(0.0.14 之前)formatAndSave命令迁移","slug":"旧版本-0-0-14-之前-formatandsave命令迁移","link":"#旧版本-0-0-14-之前-formatandsave命令迁移","children":[]},{"level":2,"title":"为什么不使用onWillSaveTextDocument","slug":"为什么不使用onwillsavetextdocument","link":"#为什么不使用onwillsavetextdocument","children":[]}],"relativePath":"guide/prettier.md","lastUpdated":1677810076000}'),o={name:"guide/prettier.md"},i=n(`<h1 id="prettier-格式化" tabindex="-1">prettier 格式化 <a class="header-anchor" href="#prettier-格式化" aria-hidden="true">#</a></h1><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>基于 prettier 最新版本@2.8.4，支持 prettier 最新配置</p><p>感谢 DCloud-HX-WKP 在开发过程中提供了所遇问题的解决方案</p></div><h2 id="用法" tabindex="-1">用法 <a class="header-anchor" href="#用法" aria-hidden="true">#</a></h2><ol><li>避免与官方格式化冲突：工具&gt;设置&gt;编辑器设置&gt;取消勾选保存时自动格式化</li><li>插件提供一个<code>ctrl+s</code>命令，名为<code>prettier格式化代码</code>，与 HBuilderX 默认保存命令重复，此时按下<code>ctrl+s</code>会出现选择菜单，设置<code>以后只选一个</code>为<code>prettier格式化代码</code>即可</li><li>在任意文件中<code>ctrl+s</code>，插件会获取该文件所在项目目录，判断项目根目录下是否存在 prettier 配置文件，如果不存在，则会创建默认 prettier 配置文件（js 配置文件）</li><li>如果不想使用插件创建的配置文件，比如之前已有统一团队风格的 prettier 配置文件，可以复制该文件到项目根目录下，插件则不会新建，而是直接使用该配置文件（配置文件无固定后缀名要求，属于 prettier 配置文件即可）</li></ol><h2 id="与官方-prettier-插件的区别" tabindex="-1">与官方 prettier 插件的区别： <a class="header-anchor" href="#与官方-prettier-插件的区别" aria-hidden="true">#</a></h2><p>官方的 prettier 不支持使用根目录 prettier 配置文件，不方便团队统一风格</p><h2 id="配置默认不支持的文件类型的格式化" tabindex="-1">配置默认不支持的文件类型的格式化 <a class="header-anchor" href="#配置默认不支持的文件类型的格式化" aria-hidden="true">#</a></h2><p>prettier默认支持 <code>JavaScript</code>、 <code>Flow</code>、 <code>JSX</code>、<code>TypeScript</code>、 <code>TSX</code>、 <code>JSON.stringify</code>、<code>JSON</code>、<code>JSON with Comments</code>、<code>JSON5</code>、<code>CSS</code>、<code>PostCSS</code>、<code>ess</code>、<code>SCSS</code>、<code>Handlebars</code>、<code>GraphQL</code>、<code>Markdown</code>、<code>MDX</code>、<code>Angular</code>、<code>HTML</code>、<code>Lightning Web Components</code>、<code>Vue</code>、<code>YAML</code></p><h3 id="安装插件" tabindex="-1">安装插件 <a class="header-anchor" href="#安装插件" aria-hidden="true">#</a></h3><p>对于不默认支持格式化的文件类型，需要安装prettier插件，并在配置文件中配置<code>plugins</code>属性</p><p>比如想要格式化java和xml文件，使用node安装prettier插件（对应语言插件请查看下方插件列表）</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro" tabindex="0"><code><span class="line"><span style="color:#E06C75;">npm</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">-</span><span style="color:#E5C07B;">D</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">prettier</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">plugin</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">java</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">prettier</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">plugin</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">xml</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="plugins支持绝对路径" tabindex="-1">plugins支持绝对路径 <a class="header-anchor" href="#plugins支持绝对路径" aria-hidden="true">#</a></h3><p>可以使用绝对路径让prettier找到它的插件（可以单独使用一个文件夹存放所有插件，避免重复安装）</p><p>.prettierrc.js设置如下</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">  plugins: [</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#98C379;">&#39;D:/uniapp-projects/示例项目/node_modules/prettier-plugin-java&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#98C379;">&#39;D:/uniapp-projects/示例项目/node_modules/prettier-plugin-xml&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    ],</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="相对路径" tabindex="-1">相对路径 <a class="header-anchor" href="#相对路径" aria-hidden="true">#</a></h3><p>.prettierrc.js设置如下</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">  plugins: [</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#98C379;">&#39;./node_modules/prettier-plugin-java&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#98C379;">&#39;./node_modules/prettier-plugin-xml&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    ],</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>现在prettier可以正常格式化java、xml文件了</p><h3 id="插件列表" tabindex="-1">插件列表 <a class="header-anchor" href="#插件列表" aria-hidden="true">#</a></h3><h4 id="官方插件" tabindex="-1">官方插件 <a class="header-anchor" href="#官方插件" aria-hidden="true">#</a></h4><ul><li><a href="https://github.com/prettier/plugin-php" target="_blank" rel="noreferrer"><code>@prettier/plugin-php</code></a></li><li><a href="https://github.com/prettier/plugin-pug" target="_blank" rel="noreferrer"><code>@prettier/plugin-pug</code></a> by <a href="https://github.com/Shinigami92" target="_blank" rel="noreferrer"><strong>@Shinigami92</strong></a></li><li><a href="https://github.com/prettier/plugin-ruby" target="_blank" rel="noreferrer"><code>@prettier/plugin-ruby</code></a></li><li><a href="https://github.com/prettier/plugin-xml" target="_blank" rel="noreferrer"><code>@prettier/plugin-xml</code></a></li></ul><h4 id="社区插件" tabindex="-1">社区插件 <a class="header-anchor" href="#社区插件" aria-hidden="true">#</a></h4><ul><li><a href="https://github.com/dangmai/prettier-plugin-apex" target="_blank" rel="noreferrer"><code>prettier-plugin-apex</code></a> by <a href="https://github.com/dangmai" target="_blank" rel="noreferrer"><strong>@dangmai</strong></a></li><li><a href="https://github.com/withastro/prettier-plugin-astro" target="_blank" rel="noreferrer"><code>prettier-plugin-astro</code></a> by <a href="https://github.com/withastro/prettier-plugin-astro/graphs/contributors" target="_blank" rel="noreferrer"><strong>@withastro contributors</strong></a></li><li><a href="https://github.com/gicentre/prettier-plugin-elm" target="_blank" rel="noreferrer"><code>prettier-plugin-elm</code></a> by <a href="https://github.com/gicentre" target="_blank" rel="noreferrer"><strong>@giCentre</strong></a></li><li><a href="https://github.com/adamzapasnik/prettier-plugin-erb" target="_blank" rel="noreferrer"><code>prettier-plugin-erb</code></a> by <a href="https://github.com/adamzapasnik" target="_blank" rel="noreferrer"><strong>@adamzapasnik</strong></a></li><li><a href="https://github.com/NaridaL/glsl-language-toolkit/tree/main/packages/prettier-plugin-glsl" target="_blank" rel="noreferrer"><code>prettier-plugin-glsl</code></a> by <a href="https://github.com/NaridaL" target="_blank" rel="noreferrer"><strong>@NaridaL</strong></a></li><li><a href="https://github.com/NiklasPor/prettier-plugin-go-template" target="_blank" rel="noreferrer"><code>prettier-plugin-go-template</code></a> by <a href="https://github.com/NiklasPor" target="_blank" rel="noreferrer"><strong>@NiklasPor</strong></a></li><li><a href="https://github.com/jhipster/prettier-java" target="_blank" rel="noreferrer"><code>prettier-plugin-java</code></a> by <a href="https://github.com/jhipster" target="_blank" rel="noreferrer"><strong>@JHipster</strong></a></li><li><a href="https://github.com/Stedi/prettier-plugin-jsonata" target="_blank" rel="noreferrer"><code>prettier-plugin-jsonata</code></a> by <a href="https://github.com/Stedi" target="_blank" rel="noreferrer"><strong>@Stedi</strong></a></li><li><a href="https://github.com/Angry-Potato/prettier-plugin-kotlin" target="_blank" rel="noreferrer"><code>prettier-plugin-kotlin</code></a> by <a href="https://github.com/Angry-Potato" target="_blank" rel="noreferrer"><strong>@Angry-Potato</strong></a></li><li><a href="https://github.com/dfinity/prettier-plugin-motoko" target="_blank" rel="noreferrer"><code>prettier-plugin-motoko</code></a> by <a href="https://github.com/dfinity" target="_blank" rel="noreferrer"><strong>@dfinity</strong></a></li><li><a href="https://github.com/joedeandev/prettier-plugin-nginx" target="_blank" rel="noreferrer"><code>prettier-plugin-nginx</code></a> by <a href="https://github.com/joedeandev" target="_blank" rel="noreferrer"><strong>@joedeandev</strong></a></li><li><a href="https://github.com/umidbekk/prettier-plugin-prisma" target="_blank" rel="noreferrer"><code>prettier-plugin-prisma</code></a> by <a href="https://github.com/umidbekk" target="_blank" rel="noreferrer"><strong>@umidbekk</strong></a></li><li><a href="https://github.com/eemeli/prettier-plugin-properties" target="_blank" rel="noreferrer"><code>prettier-plugin-properties</code></a> by <a href="https://github.com/eemeli" target="_blank" rel="noreferrer"><strong>@eemeli</strong></a></li><li><a href="https://github.com/un-ts/prettier/tree/master/packages/sh" target="_blank" rel="noreferrer"><code>prettier-plugin-sh</code></a> by <a href="https://github.com/JounQin" target="_blank" rel="noreferrer"><strong>@JounQin</strong></a></li><li><a href="https://github.com/un-ts/prettier/tree/master/packages/sql" target="_blank" rel="noreferrer"><code>prettier-plugin-sql</code></a> by <a href="https://github.com/JounQin" target="_blank" rel="noreferrer"><strong>@JounQin</strong></a></li><li><a href="https://github.com/nene/prettier-plugin-sql-cst" target="_blank" rel="noreferrer"><code>prettier-plugin-sql-cst</code></a> by <a href="https://github.com/nene" target="_blank" rel="noreferrer"><strong>@nene</strong></a></li><li><a href="https://github.com/prettier-solidity/prettier-plugin-solidity" target="_blank" rel="noreferrer"><code>prettier-plugin-solidity</code></a> by <a href="https://github.com/mattiaerre" target="_blank" rel="noreferrer"><strong>@mattiaerre</strong></a></li><li><a href="https://github.com/UnwrittenFun/prettier-plugin-svelte" target="_blank" rel="noreferrer"><code>prettier-plugin-svelte</code></a> by <a href="https://github.com/UnwrittenFun" target="_blank" rel="noreferrer"><strong>@UnwrittenFun</strong></a></li><li><a href="https://github.com/bd82/toml-tools/tree/master/packages/prettier-plugin-toml" target="_blank" rel="noreferrer"><code>prettier-plugin-toml</code></a> by [<strong>@bd82</strong>](</li></ul><h2 id="自行设置快捷键" tabindex="-1">自行设置快捷键 <a class="header-anchor" href="#自行设置快捷键" aria-hidden="true">#</a></h2><p>HBuilderX 上方菜单&gt;工具&gt;自定义快捷键&gt;更改插件快捷键</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">{ </span><span style="color:#E06C75;">&quot;key&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Ctrl+S&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">&quot;command&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;extension.prettier&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">&quot;override&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;"> }</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="旧版本-0-0-14-之前-formatandsave命令迁移" tabindex="-1">旧版本(0.0.14 之前)<code>formatAndSave</code>命令迁移 <a class="header-anchor" href="#旧版本-0-0-14-之前-formatandsave命令迁移" aria-hidden="true">#</a></h2><ol><li><p>如果使用的是旧版本的<code>formatAndSave</code>命令，HBuilderX 上方菜单&gt;工具&gt;自定义快捷键&gt;删除以下代码</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">{ </span><span style="color:#E06C75;">&quot;key&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;ctrl+s&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">&quot;command&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;extension.formatAndSave&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">&quot;override&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;"> }</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>任意文件中按下<code>ctrl+s</code>设置<code>以后只选一个</code>为<code>prettier格式化代码</code>，工具&gt;自定义快捷键&gt;将会自动生成下方代码</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">{ </span><span style="color:#E06C75;">&quot;key&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;ctrl+s&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">&quot;command&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;extension.prettier&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">&quot;override&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;"> }</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ol><h2 id="为什么不使用onwillsavetextdocument" tabindex="-1">为什么不使用<a href="https://hx.dcloud.net.cn/ExtensionDocs/Api/workspace/onWillSaveTextDocument?id=onwillsavetextdocument" target="_blank" rel="noreferrer">onWillSaveTextDocument</a> <a class="header-anchor" href="#为什么不使用onwillsavetextdocument" aria-hidden="true">#</a></h2><p>HBuilderX 插件开发提供了保存事件<code>onWillSaveTextDocument</code>，为什么不使用该事件触发格式化，而是创建一个<code>ctrl+s</code>命令来替换 HBuilderX 默认保存命令？</p><p>因为该事件只有编辑后保存才会触发，文件未发生更改情况下不会触发</p>`,33);function p(c,d,u,g,h,b){const e=l("git-talk");return s(),t("div",null,[i,a(e)])}const y=r(o,[["render",p]]);export{B as __pageData,y as default};
